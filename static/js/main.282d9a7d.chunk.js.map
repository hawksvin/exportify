{"version":3,"sources":["icons.jsx","helpers.tsx","components/Login.jsx","components/data/PlaylistsData.tsx","components/ConfigDropdown.tsx","components/PlaylistSearch.tsx","components/data/TracksData.tsx","components/data/TracksBaseData.tsx","components/data/TracksArtistsData.tsx","components/data/TracksAudioFeaturesData.tsx","components/data/TracksAlbumData.tsx","components/PlaylistExporter.tsx","components/PlaylistRow.jsx","components/Paginator.jsx","components/PlaylistsExporter.jsx","components/PlaylistTable.jsx","components/Logout.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["library","add","fab","faCheckCircle","faTimesCircle","faFileArchive","faHeart","faBolt","faMusic","faDownload","faCog","faSearch","faTimes","faSignOutAlt","getQueryParam","name","replace","results","RegExp","exec","window","location","search","decodeURIComponent","limiter","Bottleneck","maxConcurrent","minTime","on","error","jobInfo","a","response","status","retryCount","headers","Bugsnag","notify","event","addMetadata","config","groupingHash","apiCall","wrap","url","accessToken","axios","get","apiCallErrorHandler","isAxiosError","request","href","split","Login","clientId","changeUser","encodeURIComponent","protocol","host","pathname","join","Button","id","type","variant","size","onClick","this","authorize","icon","React","Component","PlaylistsData","userId","onPlaylistsLoadingStarted","onPlaylistsLoadingDone","PLAYLIST_LIMIT","SEARCH_LIMIT","data","likedTracksPlaylist","dataInitialized","loadSlice","length","start","end","loadLikedTracksPlaylist","slice","loadAll","query","filter","p","toLowerCase","includes","offset","loadedData","i","playlistsUrl","playlistsResponse","playlistsData","Array","total","fill","splice","items","likedTracksUrl","likedTracksResponse","likedTracksData","limit","ConfigDropdown","includeArtistsDataCheck","createRef","includeAudioFeaturesDataCheck","includeAlbumDataCheck","state","spin","handleCheckClick","stopPropagation","target","nodeName","props","onConfigChanged","includeArtistsData","current","checked","includeAudioFeaturesData","includeAlbumData","setState","Dropdown","Toggle","Menu","align","Item","onClickCapture","as","Form","Check","label","ref","PlaylistSearch","searchField","searchSubmitted","handleKeyDown","key","submitSearch","preventDefault","cancelSearch","handleChange","value","onPlaylistSearch","onPlaylistSearchCancel","then","clear","blur","className","InputGroup","Control","role","placeholder","onChange","onKeyDown","Append","Text","TracksData","TracksBaseData","playlist","playlistItems","getPlaylistItems","map","track","Map","item","uri","artists","String","album","release_date","images","disc_number","track_number","duration_ms","preview_url","explicit","popularity","added_by","added_at","requests","tracks","push","trackPromises","Promise","all","trackResponses","flatMap","TracksArtistsData","ARTIST_LIMIT","artistIds","from","Set","artistPromises","artistResponses","artistsById","artist","has","genres","g","TracksAudioFeaturesData","AUDIO_FEATURES_LIMIT","trackIds","audioFeaturesPromises","audioFeatures","audio_features","audioFeaturesData","af","danceability","energy","loudness","mode","speechiness","acousticness","instrumentalness","liveness","valence","tempo","time_signature","audioFeaturesTrackUris","keys","t","forEach","set","TracksAlbumData","ALBUM_LIMIT","albumIds","albumPromises","albumResponses","albumDataById","albums","copyrights","c","text","TracksCsvFile","columnNames","lineData","tracksData","dataLabels","csvContent","sanitize","trackId","string","PlaylistExporter","csvData","blob","Blob","saveAs","fileName","tracksCsvFile","tracksBaseData","addData","tracksArtistsData","tracksAudioFeaturesData","tracksAlbumData","content","PlaylistRow","exportPlaylist","export","catch","condition","style","color","renderIcon","colSpan","renderTickCross","public","collaborative","owner","display_name","Paginator","nextClick","e","onPageChanged","currentPage","prevClick","totalPages","Math","ceil","totalRecords","pageLimit","aria-label","aria-hidden","PlaylistsExporter","exportPlaylists","playlistFileNames","playlistCsvExports","onLoadedPlaylistCountChanged","playlists","doneCount","onPlaylistExportStarted","exporter","onPlaylistsExportDone","zip","JSZip","csv","file","generateAsync","disabled","PlaylistTable","PAGE_SIZE","initialized","searching","playlistCount","likedSongs","count","progressBar","show","handlePlaylistSearch","handlePlaylistSearchCancel","setSubtitle","loadCurrentPlaylistPage","playlistSearch","min","max","handlePlaylistsLoadingStarted","leaveBreadcrumb","configDropdown","handlePlaylistsLoadingDone","handlePlaylistsExportDone","handlePlaylistExportStarted","playlistName","handleConfigChanged","JSON","stringify","handlePageChanged","page","subtitle","document","getElementById","textContent","user","setUser","ProgressBar","striped","animated","now","width","data-testid","Logout","handleClick","title","App","view","URLSearchParams","hash","substring","fontSize","marginBottom","marginTop","rel","process","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","require","shim","apiKey","plugins","BugsnagPluginReact","redactedKeys","enabledReleaseStages","onError","originalError","message","ErrorBoundary","getPlugin","createErrorBoundary","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.282d9a7d.chunk.js","sourcesContent":["import { library } from '@fortawesome/fontawesome-svg-core'\nimport { fab } from '@fortawesome/free-brands-svg-icons'\nimport { faCheckCircle, faTimesCircle, faFileArchive, faHeart } from '@fortawesome/free-regular-svg-icons'\nimport { faBolt, faMusic, faDownload, faCog, faSearch, faTimes, faSignOutAlt } from '@fortawesome/free-solid-svg-icons'\n\nlibrary.add(\n  fab,\n  faCheckCircle,\n  faTimesCircle,\n  faFileArchive,\n  faHeart,\n  faBolt,\n  faMusic,\n  faDownload,\n  faCog,\n  faSearch,\n  faTimes,\n  faSignOutAlt\n)\n","import Bugsnag from \"@bugsnag/js\"\nimport axios from \"axios\"\nimport Bottleneck from \"bottleneck\"\n\n// http://stackoverflow.com/a/901144/4167042\nexport function getQueryParam(name: string) {\n  name = name.replace(/[[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n  var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\"),\n      results = regex.exec(window.location.search);\n  return results === null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n}\n\nconst REQUEST_RETRY_BUFFER = 1000\nconst MAX_RATE_LIMIT_RETRIES = 2 // 3 attempts in total\nconst limiter = new Bottleneck({\n  maxConcurrent: 1,\n  minTime: 0\n})\n\nlimiter.on(\"failed\", async (error, jobInfo) => {\n  if (error.response.status === 429 && jobInfo.retryCount < MAX_RATE_LIMIT_RETRIES) {\n    // Retry according to the indication from the server with a small buffer\n    return ((error.response.headers[\"retry-after\"] || 1) * 1000) + REQUEST_RETRY_BUFFER\n  } else if (error.response.status !== 401 && error.response.status !== 429 && jobInfo.retryCount === 0) {\n    // Log and retry any other failure once (e.g. 503/504 which sometimes occur)\n    Bugsnag.notify(\n      error,\n      (event) => {\n        event.addMetadata(\"response\", error.response)\n        event.addMetadata(\"request\", error.config)\n        event.groupingHash = \"Retried Request\"\n      }\n    )\n\n    return REQUEST_RETRY_BUFFER\n  }\n})\n\nexport const apiCall = limiter.wrap(function(url: string, accessToken: string) {\n  return axios.get(url, { headers: { 'Authorization': 'Bearer ' + accessToken } })\n})\n\nexport function apiCallErrorHandler(error: any) {\n  if (error.isAxiosError) {\n    if (error.request.status === 401) {\n      // Return to home page after auth token expiry\n      window.location.href = window.location.href.split('#')[0]\n      return\n    } else if (error.request.status >= 500 && error.request.status < 600) {\n      // Show error page when we get a 5XX that fails retries\n      window.location.href = `${window.location.href.split('#')[0]}?spotify_error=true`\n      return\n    }\n  }\n\n  throw error\n}\n","import React from \"react\"\nimport { Button } from \"react-bootstrap\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { getQueryParam } from \"helpers\"\n\nclass Login extends React.Component {\n  authorize() {\n    let clientId = getQueryParam(\"app_client_id\")\n    let changeUser = getQueryParam(\"change_user\") !== \"\"\n\n    // Use Exportify application clientId if none given\n    if (clientId === '') {\n      clientId = \"9950ac751e34487dbbe027c4fd7f8e99\"\n    }\n\n    window.location.href = \"https://accounts.spotify.com/authorize\" +\n      \"?client_id=\" + clientId +\n      \"&redirect_uri=\" + encodeURIComponent([window.location.protocol, '//', window.location.host, window.location.pathname].join('')) +\n      \"&scope=playlist-read-private%20playlist-read-collaborative%20user-library-read\" +\n      \"&response_type=token\" +\n      \"&show_dialog=\" + changeUser;\n  }\n\n  render() {\n    return (\n      <Button id=\"loginButton\" type=\"submit\" variant=\"outline-secondary\" size=\"lg\" onClick={this.authorize}>\n        <FontAwesomeIcon icon={['far', 'check-circle']} size=\"sm\" /> Get Started\n      </Button>\n    )\n  }\n}\n\nexport default Login\n","import { apiCall } from \"helpers\"\n\n// Handles cached loading of all or subsets of playlist data\nclass PlaylistsData {\n  PLAYLIST_LIMIT = 50\n  SEARCH_LIMIT = 20\n\n  userId: string\n  private accessToken: string\n  private onPlaylistsLoadingStarted?: () => void\n  private onPlaylistsLoadingDone?: () => void\n  private data: any[]\n  private likedTracksPlaylist: any\n  private dataInitialized = false\n\n  constructor(accessToken: string, userId: string, onPlaylistsLoadingStarted?: () => void, onPlaylistsLoadingDone?: () => void) {\n    this.accessToken = accessToken\n    this.userId = userId\n    this.onPlaylistsLoadingStarted = onPlaylistsLoadingStarted\n    this.onPlaylistsLoadingDone = onPlaylistsLoadingDone\n    this.data = []\n    this.likedTracksPlaylist = null\n  }\n\n  async total() {\n    if (!this.dataInitialized) {\n      await this.loadSlice()\n    }\n\n    return this.data.length\n  }\n\n  async slice(start: number, end: number) {\n    await this.loadSlice(start, end)\n    await this.loadLikedTracksPlaylist()\n\n    // It's a little ugly, but we slip in liked tracks with the first slice\n    if (start === 0) {\n      return [this.likedTracksPlaylist, ...this.data.slice(start, end)]\n    } else {\n      return this.data.slice(start, end)\n    }\n  }\n\n  async all() {\n    await this.loadAll()\n    await this.loadLikedTracksPlaylist()\n\n    return [this.likedTracksPlaylist, ...this.data]\n  }\n\n  async search(query: string) {\n    await this.loadAll()\n\n    // Case-insensitive search in playlist name\n    // TODO: Add lazy evaluation for performance?\n    return this.data\n      .filter(p => p.name.toLowerCase().includes(query.toLowerCase()))\n      .slice(0, this.SEARCH_LIMIT)\n  }\n\n  async loadAll() {\n    if (this.onPlaylistsLoadingStarted) {\n      this.onPlaylistsLoadingStarted()\n    }\n\n    await this.loadSlice()\n\n    // Get the rest of them if necessary\n    for (var offset = this.PLAYLIST_LIMIT; offset < this.data.length; offset = offset + this.PLAYLIST_LIMIT) {\n      await this.loadSlice(offset, offset + this.PLAYLIST_LIMIT)\n    }\n\n    if (this.onPlaylistsLoadingDone) {\n      this.onPlaylistsLoadingDone()\n    }\n  }\n\n  private async loadSlice(start = 0, end = start + this.PLAYLIST_LIMIT) {\n    if (this.dataInitialized) {\n      const loadedData = this.data.slice(start, end)\n\n      if (loadedData.filter(i => !i).length === 0) {\n        return loadedData\n      }\n    }\n\n    const playlistsUrl = `https://api.spotify.com/v1/users/${this.userId}/playlists?offset=${start}&limit=${end-start}`\n    const playlistsResponse = await apiCall(playlistsUrl, this.accessToken)\n    const playlistsData = playlistsResponse.data\n\n    if (!this.dataInitialized) {\n      this.data = Array(playlistsData.total).fill(null)\n      this.dataInitialized = true\n    }\n\n    this.data.splice(start, playlistsData.items.length, ...playlistsData.items)\n  }\n\n  private async loadLikedTracksPlaylist() {\n    if (this.likedTracksPlaylist !== null) {\n      return\n    }\n\n    const likedTracksUrl = `https://api.spotify.com/v1/users/${this.userId}/tracks`\n    const likedTracksResponse = await apiCall(likedTracksUrl, this.accessToken)\n    const likedTracksData = likedTracksResponse.data\n\n    this.likedTracksPlaylist = {\n      \"id\": \"liked\",\n      \"name\": \"Liked\",\n      \"public\": false,\n      \"collaborative\": false,\n      \"owner\": {\n        \"id\": this.userId,\n        \"display_name\": this.userId,\n        \"uri\": \"spotify:user:\" + this.userId\n      },\n      \"tracks\": {\n        \"href\": \"https://api.spotify.com/v1/me/tracks\",\n        \"limit\": likedTracksData.limit,\n        \"total\": likedTracksData.total\n      },\n      \"uri\": \"spotify:user:\" + this.userId + \":saved\"\n    }\n  }\n}\n\nexport default PlaylistsData\n","import './ConfigDropdown.scss'\n\nimport React from \"react\"\nimport { Dropdown, Form } from \"react-bootstrap\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\n\ntype ConfigDropdownProps = {\n  onConfigChanged: (config: any) => void\n}\n\nclass ConfigDropdown extends React.Component<ConfigDropdownProps> {\n  private includeArtistsDataCheck = React.createRef<HTMLInputElement>()\n  private includeAudioFeaturesDataCheck = React.createRef<HTMLInputElement>()\n  private includeAlbumDataCheck = React.createRef<HTMLInputElement>()\n\n  state = {\n    spin: false\n  }\n\n  handleCheckClick = (event: React.MouseEvent) => {\n    event.stopPropagation()\n\n    if ((event.target as HTMLElement).nodeName === \"INPUT\") {\n      this.props.onConfigChanged({\n        includeArtistsData: this.includeArtistsDataCheck.current?.checked || false,\n        includeAudioFeaturesData: this.includeAudioFeaturesDataCheck.current?.checked || false,\n        includeAlbumData: this.includeAlbumDataCheck.current?.checked || false\n      })\n    }\n  }\n\n  spin(spin: boolean) {\n    this.setState({ spin: spin })\n  }\n\n  render() {\n    return (\n      <Dropdown>\n        <Dropdown.Toggle variant=\"link\">\n          <FontAwesomeIcon icon={['fas', 'cog']} size=\"lg\" spin={this.state.spin} />\n        </Dropdown.Toggle>\n        <Dropdown.Menu align=\"right\">\n          <Dropdown.Item onClickCapture={this.handleCheckClick} as=\"div\">\n            <Form.Check\n              id=\"config-include-artists-data\"\n              type=\"switch\"\n              label=\"Include artists data\"\n              ref={this.includeArtistsDataCheck}\n            />\n          </Dropdown.Item>\n          <Dropdown.Item onClickCapture={this.handleCheckClick} as=\"div\">\n            <Form.Check\n              id=\"config-include-audio-features-data\"\n              type=\"switch\"\n              label=\"Include audio features data\"\n              ref={this.includeAudioFeaturesDataCheck}/>\n          </Dropdown.Item>\n          <Dropdown.Item onClickCapture={this.handleCheckClick} as=\"div\">\n            <Form.Check\n              id=\"config-include-album-data\"\n              type=\"switch\"\n              label=\"Include album data\"\n              ref={this.includeAlbumDataCheck}/>\n          </Dropdown.Item>\n        </Dropdown.Menu>\n      </Dropdown>\n    )\n  }\n}\n\nexport default ConfigDropdown\n","import './PlaylistSearch.scss'\n\nimport React from \"react\"\nimport { Form, InputGroup } from \"react-bootstrap\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\n\ntype PlaylistSearchProps = {\n  onPlaylistSearch: (query: string) => void\n  onPlaylistSearchCancel: () => Promise<any>\n}\n\nclass PlaylistSearch extends React.Component<PlaylistSearchProps> {\n  private searchField = React.createRef<HTMLInputElement>()\n\n  state = {\n    searchSubmitted: false,\n    query: \"\"\n  }\n\n  clear() {\n    this.setState(\n      { searchSubmitted: false, query: \"\" },\n      () => {\n        if (this.searchField.current) {\n          this.searchField.current.value = \"\"\n        }\n      }\n    )\n  }\n\n  handleKeyDown = (event: React.KeyboardEvent) => {\n    event.stopPropagation()\n\n    if (event.key === 'Enter') {\n      this.submitSearch()\n\n      event.preventDefault()\n    } else if (event.key === 'Escape') {\n      this.cancelSearch()\n    }\n  }\n\n  handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ query: event.target.value })\n  }\n\n  private submitSearch = () => {\n    if (this.state.query.length > 0) {\n      this.setState(\n        { searchSubmitted: true },\n        () => { this.props.onPlaylistSearch(this.state.query) }\n      )\n    }\n  }\n\n  private cancelSearch = () => {\n    this.props.onPlaylistSearchCancel().then(() => {\n      this.clear()\n\n      if (this.searchField.current) {\n        this.searchField.current.blur()\n      }\n    })\n  }\n\n  render() {\n    const icon = (this.state.searchSubmitted)\n      ? <FontAwesomeIcon icon={['fas', 'times']} size=\"sm\" onClick={this.cancelSearch} className=\"closeIcon\" />\n      : <FontAwesomeIcon icon={['fas', 'search']} size=\"sm\" onClick={this.submitSearch} className=\"searchIcon\" />\n\n    const className = this.state.query.length > 0 ? \"search queryPresent\" : \"search\"\n\n    return (\n      <Form className={className}>\n        <InputGroup>\n          <Form.Control type=\"text\" role=\"searchbox\" placeholder=\"Search\" size=\"sm\" onChange={this.handleChange} onKeyDown={this.handleKeyDown} ref={this.searchField} className=\"border-right-0 border\" />\n          <InputGroup.Append>\n            <InputGroup.Text className=\"bg-transparent\">\n              {icon}\n            </InputGroup.Text>\n          </InputGroup.Append>\n        </InputGroup>\n      </Form>\n    )\n  }\n}\n\nexport default PlaylistSearch\n","abstract class TracksData {\n  accessToken: string\n\n  constructor(accessToken: string) {\n    this.accessToken = accessToken\n  }\n\n  abstract dataLabels(): string[]\n  abstract data(): Promise<Map<string, string[]>>\n}\n\nexport default TracksData\n","import TracksData from \"./TracksData\"\nimport { apiCall } from \"helpers\"\n\nclass TracksBaseData extends TracksData {\n  playlist: any\n\n  constructor(accessToken: string, playlist: any) {\n    super(accessToken)\n    this.playlist = playlist\n  }\n\n  dataLabels() {\n    return [\n      \"Track URI\",\n      \"Track Name\",\n      \"Artist URI(s)\",\n      \"Artist Name(s)\",\n      \"Album URI\",\n      \"Album Name\",\n      \"Album Artist URI(s)\",\n      \"Album Artist Name(s)\",\n      \"Album Release Date\",\n      \"Album Image URL\",\n      \"Disc Number\",\n      \"Track Number\",\n      \"Track Duration (ms)\",\n      \"Track Preview URL\",\n      \"Explicit\",\n      \"Popularity\",\n      \"Added By\",\n      \"Added At\"\n    ]\n  }\n\n  async tracks() {\n    await this.getPlaylistItems()\n\n    return this.playlistItems.map(i => i.track)\n  }\n\n  async data() {\n    await this.getPlaylistItems()\n\n    return new Map(this.playlistItems.map(item => {\n      return [\n        item.track.uri,\n        [\n          item.track.uri,\n          item.track.name,\n          item.track.artists.map((a: any) => { return a.uri }).join(', '),\n          item.track.artists.map((a: any) => { return String(a.name).replace(/,/g, \"\\\\,\") }).join(', '),\n          item.track.album.uri == null ? '' : item.track.album.uri,\n          item.track.album.name,\n          item.track.album.artists.map((a: any) => { return a.uri }).join(', '),\n          item.track.album.artists.map((a: any) => { return String(a.name).replace(/,/g, \"\\\\,\") }).join(', '),\n          item.track.album.release_date == null ? '' : item.track.album.release_date,\n          item.track.album.images[0] == null ? '' : item.track.album.images[0].url,\n          item.track.disc_number,\n          item.track.track_number,\n          item.track.duration_ms,\n          item.track.preview_url == null ? '' : item.track.preview_url,\n          item.track.explicit,\n          item.track.popularity,\n          item.added_by == null ? '' : item.added_by.uri,\n          item.added_at\n        ]\n      ]\n    }))\n  }\n\n  // Memoization supporting multiple calls\n  private playlistItems: any[] = []\n  private async getPlaylistItems() {\n    if (this.playlistItems.length > 0) {\n      return this.playlistItems\n    }\n\n    var requests = []\n    var limit = this.playlist.tracks.limit || 100\n\n    for (var offset = 0; offset < this.playlist.tracks.total; offset = offset + limit) {\n      requests.push(`${this.playlist.tracks.href.split('?')[0]}?offset=${offset}&limit=${limit}`)\n    }\n\n    const trackPromises = requests.map(request => { return apiCall(request, this.accessToken) })\n    const trackResponses = await Promise.all(trackPromises)\n\n    this.playlistItems = trackResponses.flatMap(response => {\n      return response.data.items.filter((i: any) => i.track) // Exclude null track attributes\n    })\n  }\n}\n\nexport default TracksBaseData\n","import TracksData from \"./TracksData\"\nimport { apiCall } from \"helpers\"\n\nclass TracksArtistsData extends TracksData {\n  ARTIST_LIMIT = 50\n\n  tracks: any[]\n\n  constructor(accessToken: string, tracks: any[]) {\n    super(accessToken)\n    this.tracks = tracks\n  }\n\n  dataLabels() {\n    return [\n      \"Artist Genres\"\n    ]\n  }\n\n  async data() {\n    const artistIds = Array.from(new Set(this.tracks.flatMap((track: any) => {\n      return track\n        .artists\n        .filter((a: any) => a.type === \"artist\")\n        .map((a: any) => a.id)\n        .filter((i: string) => i)\n    })))\n\n    let requests = []\n\n    for (var offset = 0; offset < artistIds.length; offset = offset + this.ARTIST_LIMIT) {\n      requests.push(`https://api.spotify.com/v1/artists?ids=${artistIds.slice(offset, offset + this.ARTIST_LIMIT)}`)\n    }\n\n    const artistPromises = requests.map(request => { return apiCall(request, this.accessToken) })\n    const artistResponses = await Promise.all(artistPromises)\n\n    const artistsById = new Map(artistResponses.flatMap((response) => response.data.artists).map((artist: any) => [artist.id, artist]))\n\n    return new Map<string, string[]>(this.tracks.map((track: any) => {\n      return [\n        track.uri,\n        [\n          track.artists.map((a: any) => {\n            return artistsById.has(a.id) ? artistsById.get(a.id)!.genres.filter((g: string) => g).join(',') : \"\"\n          }).filter((g: string) => g).join(\",\")\n        ]\n      ]\n    }))\n  }\n}\n\nexport default TracksArtistsData\n","import TracksData from \"./TracksData\"\nimport { apiCall } from \"helpers\"\n\nclass TracksAudioFeaturesData extends TracksData {\n  AUDIO_FEATURES_LIMIT = 100\n\n  tracks: any[]\n\n  constructor(accessToken: string, tracks: any[]) {\n    super(accessToken)\n    this.tracks = tracks\n  }\n\n  dataLabels() {\n    return [\n      \"Danceability\",\n      \"Energy\",\n      \"Key\",\n      \"Loudness\",\n      \"Mode\",\n      \"Speechiness\",\n      \"Acousticness\",\n      \"Instrumentalness\",\n      \"Liveness\",\n      \"Valence\",\n      \"Tempo\",\n      \"Time Signature\"\n    ]\n  }\n\n  async data() {\n    const trackIds = this.tracks.map((track: any) => track.id)\n\n    let requests = []\n\n    for (var offset = 0; offset < trackIds.length; offset = offset + this.AUDIO_FEATURES_LIMIT) {\n      requests.push(`https://api.spotify.com/v1/audio-features?ids=${trackIds.slice(offset, offset + this.AUDIO_FEATURES_LIMIT)}`)\n    }\n\n    const audioFeaturesPromises = requests.map(request => { return apiCall(request, this.accessToken) })\n    const audioFeatures = (await Promise.all(audioFeaturesPromises)).flatMap((response) => response.data.audio_features)\n\n    const audioFeaturesData = new Map<string, string[]>(audioFeatures.filter((af: any) => af).map((audioFeatures: any) => {\n      return [\n        audioFeatures.uri,\n        [\n          audioFeatures.danceability,\n          audioFeatures.energy,\n          audioFeatures.key,\n          audioFeatures.loudness,\n          audioFeatures.mode,\n          audioFeatures.speechiness,\n          audioFeatures.acousticness,\n          audioFeatures.instrumentalness,\n          audioFeatures.liveness,\n          audioFeatures.valence,\n          audioFeatures.tempo,\n          audioFeatures.time_signature\n        ]\n      ]\n    }))\n\n    // Add empty fields where we didn't get data - can be the case for example with episodes\n    const audioFeaturesTrackUris = Array.from(audioFeaturesData.keys())\n    this.tracks.filter(t => !audioFeaturesTrackUris.includes(t.uri)).forEach((track) => {\n      audioFeaturesData.set(track.uri, [\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"])\n    })\n\n    return audioFeaturesData\n  }\n}\n\nexport default TracksAudioFeaturesData\n","import TracksData from \"./TracksData\"\nimport { apiCall } from \"helpers\"\n\nclass TracksAlbumData extends TracksData {\n  ALBUM_LIMIT = 20\n\n  tracks: any[]\n\n  constructor(accessToken: string, tracks: any[]) {\n    super(accessToken)\n    this.tracks = tracks\n  }\n\n  dataLabels() {\n    return [\"Album Genres\", \"Label\", \"Copyrights\"]\n  }\n\n  async data() {\n    const albumIds = Array.from(new Set(this.tracks.filter((track: any) => track.album.id).map((track: any) => track.album.id)))\n\n    let requests = []\n\n    for (var offset = 0; offset < albumIds.length; offset = offset + this.ALBUM_LIMIT) {\n      requests.push(`https://api.spotify.com/v1/albums?ids=${albumIds.slice(offset, offset + this.ALBUM_LIMIT)}`)\n    }\n\n    const albumPromises = requests.map((request) => apiCall(request, this.accessToken))\n    const albumResponses = await Promise.all(albumPromises)\n\n    const albumDataById = new Map<string, string[]>(\n      albumResponses.flatMap((response) => response.data.albums.map((album: any) => {\n        return [\n          album.id,\n          [\n            album.genres.join(\", \"),\n            album.label,\n            album.copyrights.map((c: any) => `${c.type} ${c.text}`).join(\", \")\n          ]\n        ]\n      }))\n    )\n\n    return new Map<string, string[]>(\n      this.tracks.map((track: any) => [track.uri, albumDataById.get(track.album.id) || [\"\", \"\", \"\"]])\n    )\n  }\n}\n\nexport default TracksAlbumData\n","import { saveAs } from \"file-saver\"\n\nimport TracksData from \"components/data/TracksData\"\nimport TracksBaseData from \"components/data/TracksBaseData\"\nimport TracksArtistsData from \"components/data/TracksArtistsData\"\nimport TracksAudioFeaturesData from \"components/data/TracksAudioFeaturesData\"\nimport TracksAlbumData from \"components/data/TracksAlbumData\"\n\nclass TracksCsvFile {\n  playlist: any\n  columnNames: string[]\n  lineData: Map<string, string[]>\n\n  constructor(playlist: any) {\n    this.playlist = playlist\n    this.columnNames = []\n    this.lineData = new Map()\n  }\n\n  async addData(tracksData: TracksData) {\n    this.columnNames.push(...tracksData.dataLabels())\n\n    const data: Map<string, string[]> = await tracksData.data()\n\n    data.forEach((value: string[], key: string) => {\n      if (this.lineData.has(key)) {\n        this.lineData.get(key)!.push(...value)\n      } else {\n        this.lineData.set(key, value)\n      }\n    })\n  }\n\n  content(): string {\n    let csvContent = ''\n\n    csvContent += this.columnNames.map(this.sanitize).join() + \"\\n\"\n\n    this.lineData.forEach((lineData, trackId) => {\n      csvContent += lineData.map(this.sanitize).join(\",\") + \"\\n\"\n    })\n\n    return csvContent\n  }\n\n  sanitize(string: string): string {\n    return '\"' + String(string).replace(/\"/g, '\"\"') + '\"'\n  }\n}\n\n// Handles exporting a single playlist as a CSV file\nclass PlaylistExporter {\n  accessToken: string\n  playlist: any\n  config: any\n\n  constructor(accessToken: string, playlist: any, config: any) {\n    this.accessToken = accessToken\n    this.playlist = playlist\n    this.config = config\n  }\n\n  async export() {\n    return this.csvData().then((data) => {\n      var blob = new Blob([ data ], { type: \"text/csv;charset=utf-8\" })\n      saveAs(blob, this.fileName(), true)\n    })\n  }\n\n  async csvData() {\n    const tracksCsvFile = new TracksCsvFile(this.playlist)\n    const tracksBaseData = new TracksBaseData(this.accessToken, this.playlist)\n\n    await tracksCsvFile.addData(tracksBaseData)\n    const tracks = await tracksBaseData.tracks()\n\n    if (this.config.includeArtistsData) {\n      const tracksArtistsData = new TracksArtistsData(this.accessToken, tracks)\n      await tracksCsvFile.addData(tracksArtistsData)\n    }\n\n    if (this.config.includeAudioFeaturesData) {\n      const tracksAudioFeaturesData = new TracksAudioFeaturesData(this.accessToken, tracks)\n      await tracksCsvFile.addData(tracksAudioFeaturesData)\n    }\n\n    if (this.config.includeAlbumData) {\n      const tracksAlbumData = new TracksAlbumData(this.accessToken, tracks)\n      await tracksCsvFile.addData(tracksAlbumData)\n    }\n\n    tracksBaseData.tracks()\n\n    return tracksCsvFile.content()\n  }\n\n  fileName(): string {\n    return this.playlist.name.replace(/[\\x00-\\x1F\\x7F/\\\\<>:;\"|=,.?*[\\] ]+/g, \"_\").toLowerCase() + \".csv\" // eslint-disable-line no-control-regex\n  }\n}\n\nexport default PlaylistExporter\n","import React from \"react\"\nimport { Button } from \"react-bootstrap\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\n\nimport { apiCallErrorHandler } from \"helpers\"\nimport PlaylistExporter from \"./PlaylistExporter\"\n\nclass PlaylistRow extends React.Component {\n  exportPlaylist = () => {\n    (new PlaylistExporter(\n      this.props.accessToken,\n      this.props.playlist,\n      this.props.config\n    )).export().catch(apiCallErrorHandler)\n  }\n\n  renderTickCross(condition) {\n    if (condition) {\n      return <FontAwesomeIcon icon={['far', 'check-circle']} size=\"sm\" />\n    } else {\n      return <FontAwesomeIcon icon={['far', 'times-circle']} size=\"sm\" style={{ color: '#ECEBE8' }} />\n    }\n  }\n\n  renderIcon(playlist) {\n    if (playlist.name === 'Liked') {\n      return <FontAwesomeIcon icon={['far', 'heart']} style={{ color: 'red' }} />;\n    } else {\n      return <FontAwesomeIcon icon={['fas', 'music']} />;\n    }\n  }\n\n  render() {\n    let playlist = this.props.playlist\n\n    if(playlist.uri==null) return (\n      <tr key={playlist.name}>\n        <td>{this.renderIcon(playlist)}</td>\n        <td>{playlist.name}</td>\n        <td colSpan=\"2\">This playlist is not supported</td>\n        <td>{this.renderTickCross(playlist.public)}</td>\n        <td>{this.renderTickCross(playlist.collaborative)}</td>\n        <td>&nbsp;</td>\n      </tr>\n    );\n\n    return (\n      <tr key={playlist.uri}>\n        <td>{this.renderIcon(playlist)}</td>\n        <td><a href={playlist.uri}>{playlist.name}</a></td>\n        <td><a href={playlist.owner.uri}>{playlist.owner.display_name}</a></td>\n        <td>{playlist.tracks.total}</td>\n        <td>{this.renderTickCross(playlist.public)}</td>\n        <td>{this.renderTickCross(playlist.collaborative)}</td>\n        <td className=\"text-right\">\n          <Button type=\"submit\" variant=\"primary\" size=\"xs\" onClick={this.exportPlaylist} className=\"text-nowrap\">\n            <FontAwesomeIcon icon={['fas', 'download']} size=\"sm\" /> Export\n          </Button>\n        </td>\n      </tr>\n    );\n  }\n}\n\nexport default PlaylistRow\n","import React from \"react\"\n\nclass Paginator extends React.Component {\n  nextClick = (e) => {\n    e.preventDefault()\n\n    this.props.onPageChanged(this.props.currentPage + 1)\n  }\n\n  prevClick = (e) => {\n    e.preventDefault()\n\n    this.props.onPageChanged(this.props.currentPage - 1)\n  }\n\n  totalPages = () => {\n    return Math.ceil(this.props.totalRecords / this.props.pageLimit)\n  }\n\n  render() {\n    return (\n      <nav className=\"paginator text-right\">\n        <ul className=\"pagination pagination-sm\">\n          <li className={this.props.currentPage <= 1 ? 'page-item disabled' : 'page-item'}>\n            { /* eslint-disable-next-line  */ }\n            <a className=\"page-link\" href=\"#\" aria-label=\"Previous\" onClick={this.prevClick}>\n              <span aria-hidden=\"true\">&laquo;</span>\n            </a>\n          </li>\n          <li className={this.props.currentPage >= this.totalPages() ? 'page-item disabled' : 'page-item'}>\n            { /* eslint-disable-next-line  */ }\n            <a className=\"page-link\" href=\"#\" aria-label=\"Next\" onClick={this.nextClick}>\n              <span aria-hidden=\"true\">&raquo;</span>\n            </a>\n          </li>\n        </ul>\n      </nav>\n    )\n  }\n}\n\nexport default Paginator\n","import React from \"react\"\nimport { Button } from \"react-bootstrap\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { saveAs } from \"file-saver\"\nimport JSZip from \"jszip\"\n\nimport PlaylistExporter from \"./PlaylistExporter\"\nimport { apiCallErrorHandler } from \"helpers\"\n\n// Handles exporting all playlist data as a zip file\nclass PlaylistsExporter extends React.Component {\n  async export(accessToken, playlistsData, config) {\n    let playlistFileNames = []\n    let playlistCsvExports = []\n\n    const playlists = await playlistsData.all(this.props.onLoadedPlaylistCountChanged)\n\n    let doneCount = 0\n\n    for (const playlist of playlists) {\n      this.props.onPlaylistExportStarted(playlist.name, doneCount)\n\n      let exporter = new PlaylistExporter(accessToken, playlist, config)\n      let csvData = await exporter.csvData()\n\n      playlistFileNames.push(exporter.fileName(playlist))\n      playlistCsvExports.push(csvData)\n\n      doneCount++\n    }\n\n    this.props.onPlaylistsExportDone()\n\n    var zip = new JSZip()\n\n    playlistCsvExports.forEach(function(csv, i) {\n      zip.file(playlistFileNames[i], csv)\n    })\n\n    zip.generateAsync({ type: \"blob\" }).then(function(content) {\n      saveAs(content, \"spotify_playlists.zip\");\n    })\n  }\n\n  exportPlaylists = () => {\n    this.export(\n      this.props.accessToken,\n      this.props.playlistsData,\n      this.props.config\n    ).catch(apiCallErrorHandler)\n  }\n\n  render() {\n    return <Button type=\"submit\" variant=\"outline-secondary\" size=\"xs\" onClick={this.exportPlaylists} className=\"text-nowrap\" disabled={this.props.disabled}>\n      <FontAwesomeIcon icon={['far', 'file-archive']}/> Export All\n    </Button>\n  }\n}\n\nexport default PlaylistsExporter\n","import React from \"react\"\nimport { ProgressBar } from \"react-bootstrap\"\n\nimport Bugsnag from \"@bugsnag/js\"\nimport PlaylistsData from \"./data/PlaylistsData\"\nimport ConfigDropdown from \"./ConfigDropdown\"\nimport PlaylistSearch from \"./PlaylistSearch\"\nimport PlaylistRow from \"./PlaylistRow\"\nimport Paginator from \"./Paginator\"\nimport PlaylistsExporter from \"./PlaylistsExporter\"\nimport { apiCall, apiCallErrorHandler } from \"helpers\"\n\nclass PlaylistTable extends React.Component {\n  PAGE_SIZE = 20\n\n  userId = null\n  playlistsData = null\n\n  state = {\n    initialized: false,\n    searching: false,\n    playlists: [],\n    playlistCount: 0,\n    likedSongs: {\n      limit: 0,\n      count: 0\n    },\n    currentPage: 1,\n    progressBar: {\n      show: false,\n      label: \"\",\n      value: 0\n    },\n    config: {\n      includeArtistsData: false,\n      includeAudioFeaturesData: false,\n      includeAlbumData: false\n    }\n  }\n\n  constructor(props) {\n    super(props)\n\n    this.configDropdown = React.createRef()\n    this.playlistSearch = React.createRef()\n\n    if (props.config) {\n      this.state.config = props.config\n    }\n  }\n\n  handlePlaylistSearch = async (query) => {\n    if (query.length === 0) {\n      this.handlePlaylistSearchCancel()\n    } else {\n      const playlists = await this.playlistsData.search(query).catch(apiCallErrorHandler)\n\n      this.setState({\n        searching: true,\n        playlists: playlists,\n        playlistCount: playlists.length,\n        currentPage: 1\n      })\n\n      if (playlists.length === this.playlistsData.SEARCH_LIMIT) {\n        this.setSubtitle(`First ${playlists.length} results with \"${query}\" in playlist name`)\n      } else {\n        this.setSubtitle(`${playlists.length} results with \"${query}\" in playlist name`)\n      }\n    }\n  }\n\n  handlePlaylistSearchCancel = () => {\n    return this.loadCurrentPlaylistPage().catch(apiCallErrorHandler)\n  }\n\n  loadCurrentPlaylistPage = async () => {\n    if (this.playlistSearch.current) {\n      this.playlistSearch.current.clear()\n    }\n\n    try {\n      const playlists = await this.playlistsData.slice(\n        ((this.state.currentPage - 1) * this.PAGE_SIZE),\n        ((this.state.currentPage - 1) * this.PAGE_SIZE) + this.PAGE_SIZE\n      )\n\n      // FIXME: Handle unmounting\n      this.setState(\n        {\n          initialized: true,\n          searching: false,\n          playlists: playlists,\n          playlistCount: await this.playlistsData.total()\n        },\n        () => {\n          const min = ((this.state.currentPage - 1) * this.PAGE_SIZE) + 1\n          const max = Math.min(min + this.PAGE_SIZE - 1, this.state.playlistCount)\n          this.setSubtitle(`${min}-${max} of ${this.state.playlistCount} playlists for ${this.userId}`)\n        }\n      )\n    } catch(error) {\n      apiCallErrorHandler(error)\n    }\n  }\n\n  handlePlaylistsLoadingStarted = () => {\n    Bugsnag.leaveBreadcrumb(\"Started exporting all playlists\")\n\n    this.configDropdown.current.spin(true)\n  }\n\n  handlePlaylistsLoadingDone = () => {\n    this.configDropdown.current.spin(false)\n  }\n\n  handlePlaylistsExportDone = () => {\n    Bugsnag.leaveBreadcrumb(\"Finished exporting all playlists\")\n\n    this.setState({\n      progressBar: {\n        show: true,\n        label: \"Done!\",\n        value: this.state.playlistCount\n      }\n    })\n  }\n\n  handlePlaylistExportStarted = (playlistName, doneCount) => {\n    Bugsnag.leaveBreadcrumb(`Started exporting playlist ${playlistName}`)\n\n    this.setState({\n      progressBar: {\n        show: true,\n        label: `Exporting ${playlistName}...`,\n        value: doneCount\n      }\n    })\n  }\n\n  handleConfigChanged = (config) => {\n    Bugsnag.leaveBreadcrumb(`Config updated to ${JSON.stringify(config)}`)\n\n    this.setState({ config: config })\n  }\n\n  handlePageChanged = (page) => {\n    try {\n      this.setState(\n        { currentPage: page },\n        this.loadCurrentPlaylistPage\n      )\n    } catch(error) {\n      apiCallErrorHandler(error)\n    }\n  }\n\n  setSubtitle(subtitle) {\n    if (document.getElementById(\"subtitle\") !== null) {\n      document.getElementById(\"subtitle\").textContent = subtitle\n    }\n  }\n\n  async componentDidMount() {\n    try {\n      const user = await apiCall(\"https://api.spotify.com/v1/me\", this.props.accessToken)\n        .then(response => response.data)\n\n      Bugsnag.setUser(user.id, user.uri, user.display_name)\n\n      this.userId = user.id\n      this.playlistsData = new PlaylistsData(\n        this.props.accessToken,\n        this.userId,\n        this.handlePlaylistsLoadingStarted,\n        this.handlePlaylistsLoadingDone\n      )\n\n      await this.loadCurrentPlaylistPage()\n    } catch(error) {\n      apiCallErrorHandler(error)\n    }\n  }\n\n  render() {\n    const progressBar = <ProgressBar striped variant=\"primary\" animated={this.state.progressBar.value < this.state.playlistCount} now={this.state.progressBar.value} max={this.state.playlistCount} label={this.state.progressBar.label} />\n\n    if (this.state.initialized) {\n      return (\n        <div id=\"playlists\">\n          <div id=\"playlistsHeader\">\n            <Paginator currentPage={this.state.currentPage} pageLimit={this.PAGE_SIZE} totalRecords={this.state.playlistCount} onPageChanged={this.handlePageChanged}/>\n            <PlaylistSearch onPlaylistSearch={this.handlePlaylistSearch} onPlaylistSearchCancel={this.handlePlaylistSearchCancel} ref={this.playlistSearch} />\n            <ConfigDropdown onConfigChanged={this.handleConfigChanged} ref={this.configDropdown} />\n            {this.state.progressBar.show && progressBar}\n          </div>\n          <table className=\"table table-hover table-sm\">\n            <thead>\n              <tr>\n                <th style={{width: \"30px\"}}></th>\n                <th>Name</th>\n                <th style={{width: \"150px\"}}>Owner</th>\n                <th style={{width: \"100px\"}}>Tracks</th>\n                <th style={{width: \"120px\"}}>Public?</th>\n                <th style={{width: \"120px\"}}>Collaborative?</th>\n                <th style={{width: \"100px\"}} className=\"text-right\">\n                  <PlaylistsExporter\n                    accessToken={this.props.accessToken}\n                    onPlaylistsExportDone={this.handlePlaylistsExportDone}\n                    onPlaylistExportStarted={this.handlePlaylistExportStarted}\n                    playlistsData={this.playlistsData}\n                    config={this.state.config}\n                    disabled={this.state.searching}\n                  />\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.playlists.map((playlist, i) => {\n                return <PlaylistRow\n                  playlist={playlist}\n                  key={playlist.id}\n                  accessToken={this.props.accessToken}\n                  config={this.state.config}\n                />\n              })}\n            </tbody>\n          </table>\n          <div id=\"playlistsFooter\">\n            <Paginator currentPage={this.state.currentPage} pageLimit={this.PAGE_SIZE} totalRecords={this.state.playlistCount} onPageChanged={this.handlePageChanged}/>\n          </div>\n        </div>\n      );\n    } else {\n      return <div className=\"spinner\" data-testid=\"playlistTableSpinner\"></div>\n    }\n  }\n}\n\nexport default PlaylistTable\n","import React from \"react\"\nimport { Button } from \"react-bootstrap\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\n\nclass Logout extends React.Component {\n  handleClick = () => {\n    window.location.href = `${window.location.href.split('#')[0]}?change_user=true`\n  }\n\n  render() {\n    return (\n      <Button id=\"logoutButton\" type=\"submit\" variant=\"link\" size=\"lg\" onClick={this.handleClick} title=\"Change user\">\n        <FontAwesomeIcon icon={['fas', 'sign-out-alt']} size=\"lg\" />\n      </Button>\n    )\n  }\n}\n\nexport default Logout\n","import './App.scss'\nimport \"./icons\"\n\nimport React from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport \"url-search-params-polyfill\"\n\nimport Login from 'components/Login'\nimport PlaylistTable from \"components/PlaylistTable\"\nimport { getQueryParam } from \"helpers\"\nimport Logout from \"components/Logout\"\n\nfunction App() {\n  let view\n  let key = new URLSearchParams(window.location.hash.substring(1))\n\n  if (getQueryParam('spotify_error') !== '') {\n    view = <div id=\"spotifyErrorMessage\" className=\"lead\">\n      <p><FontAwesomeIcon icon={['fas', 'bolt']} style={{ fontSize: \"50px\", marginBottom: \"20px\" }} /></p>\n      <p>Oops, Exportify has encountered an unexpected error (5XX) while using the Spotify API. This kind of error is due to a problem on Spotify's side, and although it's rare, unfortunately all we can do is retry later.</p>\n      <p style={{ marginTop: \"50px\" }}>Keep an eye on the <a target=\"_blank\" rel=\"noreferrer\" href=\"https://status.spotify.dev/\">Spotify Web API Status page</a> to see if there are any known problems right now, and then <a rel=\"noreferrer\" href=\"?\">retry</a>.</p>\n    </div>\n  } else if (key.has('access_token')) {\n    view = <PlaylistTable accessToken={key.get('access_token')} />\n  } else {\n    view = <Login />\n  }\n\n  return (\n    <div className=\"App container\">\n      <header className=\"App-header\">\n        { key.has('access_token') && <Logout /> }\n        <h1>\n          <FontAwesomeIcon icon={['fab', 'spotify']} color=\"#84BD00\" size=\"sm\" /> <a href={process.env.PUBLIC_URL}>Exportify</a>\n        </h1>\n\n        <p id=\"subtitle\" className=\"lead text-secondary\">\n          Export your Spotify playlists.\n        </p>\n      </header>\n\n      {view}\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);  \n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n}\n\nexport default reportWebVitals;\n","import React from \"react\"\nimport Bugsnag from '@bugsnag/js'\nimport BugsnagPluginReact from '@bugsnag/plugin-react'\nimport ReactDOM from \"react-dom\"\nimport \"./index.scss\"\nimport App from \"./App\"\nimport reportWebVitals from \"./reportWebVitals\"\n\n// https://caniuse.com/mdn-javascript_builtins_array_flatmap\nrequire('array.prototype.flatmap').shim()\n\nBugsnag.start({\n  apiKey: 'a65916528275f084a1754a59797a36b3',\n  plugins: [new BugsnagPluginReact()],\n  redactedKeys: ['Authorization'],\n  enabledReleaseStages: [ 'production', 'staging' ],\n  onError: function (event) {\n    event.request.url = \"[REDACTED]\" // Don't send access tokens\n\n    if (event.originalError.isAxiosError) {\n      event.groupingHash = event.originalError.message\n    }\n  }\n})\n\nconst ErrorBoundary = Bugsnag.getPlugin('react')!.createErrorBoundary(React)\n\nReactDOM.render(\n  <React.StrictMode>\n    <ErrorBoundary>\n      <App />\n    </ErrorBoundary>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}